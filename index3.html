<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domestic Help Connect - Enhanced</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #2c3e50;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #3498db;
            margin-bottom: 10px;
            font-size: 2.5rem;
            position: relative;
            display: inline-block;
        }
        
        h1:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            border-radius: 2px;
        }
        
        .tagline {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-top: 15px;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input[type="text"],
        input[type="email"],
        input[type="number"],
        input[type="password"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e4edf5;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background-color: #f9fbfd;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            background-color: #fff;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        button {
            background: linear-gradient(90deg, #3498db, #2ecc71);
            color: white;
            border: none;
            padding: 14px 28px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(52, 152, 219, 0.4);
        }
        
        .btn-sm {
            padding: 8px 15px;
            font-size: 14px;
            margin: 0 5px;
        }
        
        .btn-danger {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
        }
        
        .btn-danger:hover {
            box-shadow: 0 6px 15px rgba(231, 76, 60, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            box-shadow: 0 4px 10px rgba(46, 204, 113, 0.3);
        }
        
        .btn-success:hover {
            box-shadow: 0 6px 15px rgba(46, 204, 113, 0.4);
        }
        
        .confirmation {
            text-align: center;
            display: none;
            padding: 30px;
            background: linear-gradient(135deg, #e8f4fc 0%, #d1edfe 100%);
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #3498db;
        }
        
        .confirmation h2 {
            color: #27ae60;
            margin-bottom: 20px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            display: none;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .data-table th,
        .data-table td {
            border: 1px solid #e4edf5;
            padding: 12px;
            text-align: left;
        }
        
        .data-table th {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
            font-weight: 600;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9fbfd;
        }
        
        .data-table tr:hover {
            background-color: #e8f4fc;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            flex-wrap: wrap;
            background: #f9fbfd;
            border-radius: 10px;
            padding: 5px;
        }
        
        .tab {
            padding: 12px 24px;
            cursor: pointer;
            background-color: transparent;
            border-radius: 8px;
            margin-right: 5px;
            margin-bottom: 5px;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #7f8c8d;
        }
        
        .tab.active {
            background: linear-gradient(90deg, #3498db, #2ecc71);
            color: white;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
        }
        
        .tab i {
            margin-right: 8px;
        }
        
        .view-data {
            display: none;
        }
        
        .password-prompt {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #f9fbfd 0%, #e8f4fc 100%);
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .password-error {
            color: #e74c3c;
            margin-top: 10px;
            display: none;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
            padding: 20px;
        }
        
        .loading i {
            font-size: 2rem;
            color: #3498db;
            margin-bottom: 15px;
        }
        
        .notification-inbox {
            margin-top: 30px;
            border: 2px solid #e4edf5;
            border-radius: 10px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
            background: #f9fbfd;
        }
        
        .notification-item {
            padding: 15px;
            border-bottom: 1px solid #e4edf5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 8px;
            margin-bottom: 10px;
            background: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .notification-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .notification-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .notification-content {
            flex-grow: 1;
        }
        
        .notification-actions {
            display: flex;
            gap: 10px;
        }
        
        .search-box {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }
        
        .search-box input {
            flex-grow: 1;
            border-radius: 8px 0 0 8px;
        }
        
        .search-box button {
            margin: 0;
            border-radius: 0 8px 8px 0;
        }
        
        .stats-container {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            min-width: 180px;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            color: white;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .filter-container {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-container select {
            min-width: 150px;
            border-radius: 8px;
        }
        
        .settings-panel {
            margin-top: 30px;
            padding: 25px;
            border: 2px solid #e4edf5;
            border-radius: 10px;
            background: #f9fbfd;
        }
        
        .phone-notification {
            background: linear-gradient(135deg, #e8f4fc 0%, #d1edfe 100%);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #3498db;
        }
        
        .no-data {
            text-align: center;
            padding: 30px;
            color: #7f8c8d;
            background: #f9fbfd;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .no-data i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #e4edf5;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                margin-bottom: 5px;
                border-radius: 8px;
                text-align: center;
            }
            
            .stats-container {
                flex-direction: column;
                align-items: center;
            }
            
            .stat-card {
                width: 100%;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .search-box input {
                border-radius: 8px;
            }
            
            .search-box button {
                border-radius: 8px;
            }
        }
        
        .form-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .form-header i {
            font-size: 2rem;
            color: #3498db;
            margin-right: 15px;
        }
        
        .form-header h2 {
            color: #2c3e50;
            font-size: 1.8rem;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Domestic Help Connect</h1>
            <p class="tagline">Connecting households with trusted domestic professionals</p>
        </header>
        
        <div class="tabs">
            <div class="tab active" onclick="showTab('form')"><i class="fas fa-clipboard-list"></i> Submit Request</div>
            <div class="tab" onclick="showTab('data')"><i class="fas fa-database"></i> View Submissions</div>
            <div class="tab" onclick="showTab('notifications')"><i class="fas fa-bell"></i> Notifications</div>
            <div class="tab" onclick="showTab('settings')"><i class="fas fa-cog"></i> Settings</div>
        </div>
        
        <div id="form-section" class="form-section">
            <div class="form-header">
                <i class="fas fa-house-user"></i>
                <h2>Service Request Form</h2>
            </div>
            
            <form id="dataForm">
                <div class="form-group">
                    <label for="name">Full Name <span class="required">*</span></label>
                    <input type="text" id="name" name="name" required>
                    <div class="error" id="nameError">Please enter your name</div>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email">
                    <div class="error" id="emailError">Please enter a valid email address</div>
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone Number <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required placeholder="0741278248">
                    <div class="error" id="phoneError">Please enter a valid phone number</div>
                </div>
                
                <div class="form-group">
                    <label for="age">Age</label>
                    <input type="number" id="age" name="age" min="18" max="70">
                </div>
                
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" name="gender">
                        <option value="">Select</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                        <option value="prefer-not-to-say">Prefer not to say</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="service">Service Needed <span class="required">*</span></label>
                    <select id="service" name="service" required>
                        <option value="">Select a service</option>
                        <option value="cleaning">Cleaning</option>
                        <option value="cooking">Cooking</option>
                        <option value="childcare">Childcare</option>
                        <option value="eldercare">Elderly Care</option>
                        <option value="gardening">Gardening</option>
                        <option value="driving">Driving</option>
                        <option value="other">Other</option>
                    </select>
                    <div class="error" id="serviceError">Please select a service</div>
                </div>
                
                <div class="form-group">
                    <label for="experience">Experience (Years)</label>
                    <input type="number" id="experience" name="experience" min="0" max="50">
                </div>
                
                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" name="location" placeholder="City or area">
                </div>
                
                <div class="form-group">
                    <label for="availability">Availability</label>
                    <select id="availability" name="availability">
                        <option value="">Select availability</option>
                        <option value="full-time">Full Time</option>
                        <option value="part-time">Part Time</option>
                        <option value="weekends">Weekends Only</option>
                        <option value="as-needed">As Needed</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="feedback">Additional Information <span class="required">*</span></label>
                    <textarea id="feedback" name="feedback" rows="4" required placeholder="Tell us about your needs or experience..."></textarea>
                    <div class="error" id="feedbackError">Please provide additional information</div>
                </div>
                
                <button type="submit"><i class="fas fa-paper-plane"></i> Submit Request</button>
            </form>
            
            <div class="loading" id="loadingIndicator">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Processing your request...</p>
            </div>
            
            <div id="confirmation" class="confirmation">
                <h2><i class="fas fa-check-circle"></i> Thank You!</h2>
                <p>Your service request has been successfully submitted.</p>
                <p>Your response has been recorded in our database.</p>
                <p>We'll contact you at <span id="confirmPhone"></span> soon.</p>
            </div>
        </div>
        
        <div id="view-data" class="view-data">
            <div id="password-prompt" class="password-prompt">
                <h2><i class="fas fa-lock"></i> Authentication Required</h2>
                <div class="form-group">
                    <label for="password">Enter Password</label>
                    <input type="password" id="password" placeholder="Password">
                    <div class="password-error" id="passwordError">Incorrect password. Please try again.</div>
                </div>
                <button onclick="checkPassword()"><i class="fas fa-unlock"></i> View Submissions</button>
            </div>
            
            <div id="data-content" style="display: none;">
                <div class="form-header">
                    <i class="fas fa-database"></i>
                    <h2>Service Request Submissions</h2>
                </div>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-value" id="totalSubmissions">0</div>
                        <div class="stat-label">Total Requests</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="cleaningRequests">0</div>
                        <div class="stat-label">Cleaning Services</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="careRequests">0</div>
                        <div class="stat-label">Care Services</div>
                    </div>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search by name, phone, or service..." onkeyup="filterSubmissions()">
                    <button onclick="filterSubmissions()"><i class="fas fa-search"></i> Search</button>
                </div>
                
                <div class="filter-container">
                    <select id="serviceFilter" onchange="filterSubmissions()">
                        <option value="">All Services</option>
                        <option value="cleaning">Cleaning</option>
                        <option value="cooking">Cooking</option>
                        <option value="childcare">Childcare</option>
                        <option value="eldercare">Elderly Care</option>
                        <option value="gardening">Gardening</option>
                        <option value="driving">Driving</option>
                        <option value="other">Other</option>
                    </select>
                    
                    <select id="availabilityFilter" onchange="filterSubmissions()">
                        <option value="">All Availability</option>
                        <option value="full-time">Full Time</option>
                        <option value="part-time">Part Time</option>
                        <option value="weekends">Weekends Only</option>
                        <option value="as-needed">As Needed</option>
                    </select>
                    
                    <select id="genderFilter" onchange="filterSubmissions()">
                        <option value="">All Genders</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                        <option value="prefer-not-to-say">Prefer not to say</option>
                    </select>
                    
                    <button onclick="clearSearch()" class="btn-sm"><i class="fas fa-times"></i> Clear Filters</button>
                </div>
                
                <table class="data-table" id="submissionsTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Phone</th>
                            <th>Service</th>
                            <th>Location</th>
                            <th>Availability</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="submissionsBody">
                        <!-- Data will be inserted here -->
                    </tbody>
                </table>
                <div id="noDataMessage" class="no-data">
                    <i class="fas fa-inbox"></i>
                    <h3>No submissions yet</h3>
                    <p>All service requests will appear here</p>
                </div>
                
                <div style="margin-top: 20px; text-align: center;">
                    <button onclick="exportToCSV()" class="btn-success"><i class="fas fa-file-csv"></i> Export to CSV</button>
                    <button onclick="clearAllData()" class="btn-danger"><i class="fas fa-trash"></i> Clear All Data</button>
                </div>
            </div>
        </div>
        
        <div id="notifications-tab" class="view-data">
            <div id="notifications-password-prompt" class="password-prompt">
                <h2><i class="fas fa-lock"></i> Authentication Required</h2>
                <div class="form-group">
                    <label for="notifications-password">Enter Password</label>
                    <input type="password" id="notifications-password" placeholder="Password">
                    <div class="password-error" id="notificationsPasswordError">Incorrect password. Please try again.</div>
                </div>
                <button onclick="checkNotificationsPassword()"><i class="fas fa-unlock"></i> View Notifications</button>
            </div>
            
            <div id="notifications-content" style="display: none;">
                <div class="form-header">
                    <i class="fas fa-bell"></i>
                    <h2>Notifications</h2>
                </div>
                <p>Latest notifications from service requests</p>
                
                <div class="notification-inbox" id="notificationInbox">
                    <!-- Notifications will be inserted here -->
                </div>
                
                <div style="margin-top: 20px; text-align: center;">
                    <button onclick="markAllAsRead()" class="btn-success"><i class="fas fa-check-double"></i> Mark All as Read</button>
                    <button onclick="clearAllNotifications()" class="btn-danger"><i class="fas fa-trash"></i> Clear All Notifications</button>
                </div>
            </div>
        </div>
        
        <div id="settings-tab" class="view-data">
            <div id="settings-password-prompt" class="password-prompt">
                <h2><i class="fas fa-lock"></i> Authentication Required</h2>
                <div class="form-group">
                    <label for="settings-password">Enter Password</label>
                    <input type="password" id="settings-password" placeholder="Password">
                    <div class="password-error" id="settingsPasswordError">Incorrect password. Please try again.</div>
                </div>
                <button onclick="checkSettingsPassword()"><i class="fas fa-unlock"></i> View Settings</button>
            </div>
            
            <div id="settings-content" style="display: none;">
                <div class="form-header">
                    <i class="fas fa-cog"></i>
                    <h2>System Settings</h2>
                </div>
                
                <div class="settings-panel">
                    <h3><i class="fas fa-sliders-h"></i> Application Settings</h3>
                    <p>Configure your application preferences</p>
                    
                    <div class="form-group">
                        <label for="adminEmail">Admin Email Address</label>
                        <input type="email" id="adminEmail" value="admin@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="resultsPerPage">Results Per Page</label>
                        <select id="resultsPerPage">
                            <option value="10">10 results</option>
                            <option value="25">25 results</option>
                            <option value="50">50 results</option>
                            <option value="100">100 results</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="autoRefresh">Auto-Refresh Data</label>
                        <select id="autoRefresh">
                            <option value="enabled">Enabled</option>
                            <option value="disabled">Disabled</option>
                        </select>
                    </div>
                    
                    <button onclick="saveSettings()"><i class="fas fa-save"></i> Save Settings</button>
                    
                    <div class="phone-notification">
                        <h4><i class="fas fa-bell"></i> Notification Preferences</h4>
                        <p>Configure how you receive notifications for new service requests</p>
                        
                        <div class="form-group">
                            <label for="notificationPreference">Notification Method</label>
                            <select id="notificationPreference">
                                <option value="email">Email Only</option>
                                <option value="browser">Browser Notification</option>
                                <option value="both">Both Email and Browser</option>
                            </select>
                        </div>
                        
                        <button onclick="testNotification()" class="btn-success"><i class="fas fa-bell"></i> Test Notification</button>
                        <p id="testResult" style="margin-top: 10px;"></p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Domestic Help Connect &copy; 2023 | Connecting households with trusted domestic professionals</p>
        </footer>
    </div>

    <script>
        // Define the password
        const CORRECT_PASSWORD = "Edwin@703";
        let authenticated = false;
        let notificationsAuthenticated = false;
        let settingsAuthenticated = false;
        
        // System settings
        let systemSettings = {
            adminEmail: "admin@example.com",
            notificationMethod: "email",
            resultsPerPage: "10",
            autoRefresh: "enabled"
        };
        
        // Load settings from localStorage
        function loadSettings() {
            const savedSettings = localStorage.getItem('systemSettings');
            if (savedSettings) {
                systemSettings = JSON.parse(savedSettings);
                document.getElementById('adminEmail').value = systemSettings.adminEmail;
                document.getElementById('notificationPreference').value = systemSettings.notificationMethod;
                document.getElementById('resultsPerPage').value = systemSettings.resultsPerPage;
                document.getElementById('autoRefresh').value = systemSettings.autoRefresh;
            }
        }
        
        // Save settings to localStorage
        function saveSettings() {
            systemSettings.adminEmail = document.getElementById('adminEmail').value;
            systemSettings.notificationMethod = document.getElementById('notificationPreference').value;
            systemSettings.resultsPerPage = document.getElementById('resultsPerPage').value;
            systemSettings.autoRefresh = document.getElementById('autoRefresh').value;
            
            localStorage.setItem('systemSettings', JSON.stringify(systemSettings));
            alert('Settings saved successfully!');
        }
        
        // Test notification
        function testNotification() {
            document.getElementById('testResult').textContent = "Test notification triggered successfully!";
            setTimeout(() => {
                document.getElementById('testResult').textContent = "";
            }, 3000);
        }
        
        // Show/hide tabs
        function showTab(tabName) {
            // Hide all content sections
            document.getElementById('form-section').style.display = 'none';
            document.getElementById('view-data').style.display = 'none';
            document.getElementById('notifications-tab').style.display = 'none';
            document.getElementById('settings-tab').style.display = 'none';
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show the selected tab and set it as active
            if (tabName === 'form') {
                document.getElementById('form-section').style.display = 'block';
                document.querySelectorAll('.tab')[0].classList.add('active');
            } else if (tabName === 'data') {
                document.getElementById('view-data').style.display = 'block';
                document.querySelectorAll('.tab')[1].classList.add('active');
                
                // If not authenticated, show password prompt
                if (!authenticated) {
                    document.getElementById('password-prompt').style.display = 'block';
                    document.getElementById('data-content').style.display = 'none';
                    document.getElementById('password').value = '';
                    document.getElementById('passwordError').style.display = 'none';
                } else {
                    document.getElementById('password-prompt').style.display = 'none';
                    document.getElementById('data-content').style.display = 'block';
                    displaySubmissions();
                }
            } else if (tabName === 'notifications') {
                document.getElementById('notifications-tab').style.display = 'block';
                document.querySelectorAll('.tab')[2].classList.add('active');
                
                // If not authenticated, show password prompt
                if (!notificationsAuthenticated) {
                    document.getElementById('notifications-password-prompt').style.display = 'block';
                    document.getElementById('notifications-content').style.display = 'none';
                    document.getElementById('notifications-password').value = '';
                    document.getElementById('notificationsPasswordError').style.display = 'none';
                } else {
                    document.getElementById('notifications-password-prompt').style.display = 'none';
                    document.getElementById('notifications-content').style.display = 'block';
                    displayNotifications();
                }
            } else if (tabName === 'settings') {
                document.getElementById('settings-tab').style.display = 'block';
                document.querySelectorAll('.tab')[3].classList.add('active');
                
                // Load settings
                loadSettings();
                
                // If not authenticated, show password prompt
                if (!settingsAuthenticated) {
                    document.getElementById('settings-password-prompt').style.display = 'block';
                    document.getElementById('settings-content').style.display = 'none';
                    document.getElementById('settings-password').value = '';
                    document.getElementById('settingsPasswordError').style.display = 'none';
                } else {
                    document.getElementById('settings-password-prompt').style.display = 'none';
                    document.getElementById('settings-content').style.display = 'block';
                }
            }
        }
        
        // Check password function for submissions
        function checkPassword() {
            const enteredPassword = document.getElementById('password').value;
            if (enteredPassword === CORRECT_PASSWORD) {
                authenticated = true;
                document.getElementById('password-prompt').style.display = 'none';
                document.getElementById('data-content').style.display = 'block';
                displaySubmissions();
            } else {
                document.getElementById('passwordError').style.display = 'block';
            }
        }
        
        // Check password function for notifications
        function checkNotificationsPassword() {
            const enteredPassword = document.getElementById('notifications-password').value;
            if (enteredPassword === CORRECT_PASSWORD) {
                notificationsAuthenticated = true;
                document.getElementById('notifications-password-prompt').style.display = 'none';
                document.getElementById('notifications-content').style.display = 'block';
                displayNotifications();
            } else {
                document.getElementById('notificationsPasswordError').style.display = 'block';
            }
        }
        
        // Check password function for settings
        function checkSettingsPassword() {
            const enteredPassword = document.getElementById('settings-password').value;
            if (enteredPassword === CORRECT_PASSWORD) {
                settingsAuthenticated = true;
                document.getElementById('settings-password-prompt').style.display = 'none';
                document.getElementById('settings-content').style.display = 'block';
            } else {
                document.getElementById('settingsPasswordError').style.display = 'block';
            }
        }
        
        // Form validation and submission
        document.getElementById('dataForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Reset errors
            document.querySelectorAll('.error').forEach(el => el.style.display = 'none');
            
            // Validate form
            let isValid = true;
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const feedback = document.getElementById('feedback').value.trim();
            const service = document.getElementById('service').value;
            
            if (!name) {
                document.getElementById('nameError').style.display = 'block';
                isValid = false;
            }
            
            if (email && !isValidEmail(email)) {
                document.getElementById('emailError').style.display = 'block';
                isValid = false;
            }
            
            if (!phone || !isValidPhone(phone)) {
                document.getElementById('phoneError').style.display = 'block';
                isValid = false;
            }
            
            if (!service) {
                document.getElementById('serviceError').style.display = 'block';
                isValid = false;
            }
            
            if (!feedback) {
                document.getElementById('feedbackError').style.display = 'block';
                isValid = false;
            }
            
            if (!isValid) return;
            
            // Get form values
            const age = document.getElementById('age').value;
            const gender = document.getElementById('gender').value;
            const experience = document.getElementById('experience').value;
            const location = document.getElementById('location').value.trim();
            const availability = document.getElementById('availability').value;
            
            // Create submission object
            const submission = {
                name,
                email: email || 'Not provided',
                phone,
                age: age || 'Not specified',
                gender: gender || 'Not specified',
                service,
                experience: experience || 'Not specified',
                location: location || 'Not specified',
                availability: availability || 'Not specified',
                feedback,
                date: new Date().toLocaleString(),
                timestamp: new Date().getTime()
            };
            
            // Show loading indicator
            document.getElementById('dataForm').style.display = 'none';
            document.getElementById('loadingIndicator').style.display = 'block';
            
            // Save to database (localStorage in this example)
            saveSubmission(submission);
            
            // Create and save notification
            saveNotification(submission);
            
            // Simulate processing delay
            setTimeout(() => {
                document.getElementById('loadingIndicator').style.display = 'none';
                document.getElementById('confirmation').style.display = 'block';
                document.getElementById('confirmPhone').textContent = phone;
                
                // Reset form after delay
                setTimeout(() => {
                    document.getElementById('dataForm').reset();
                    document.getElementById('dataForm').style.display = 'block';
                    document.getElementById('confirmation').style.display = 'none';
                }, 5000);
            }, 2000);
        });
        
        // Email validation
        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        // Phone validation
        function isValidPhone(phone) {
            const re = /^[0-9+\-\s()]{10,}$/;
            return re.test(phone);
        }
        
        // Save submission to localStorage
        function saveSubmission(submission) {
            let submissions = JSON.parse(localStorage.getItem('formSubmissions')) || [];
            submissions.push(submission);
            localStorage.setItem('formSubmissions', JSON.stringify(submissions));
        }
        
        // Save notification to localStorage
        function saveNotification(submission) {
            let notifications = JSON.parse(localStorage.getItem('formNotifications')) || [];
            const notification = {
                id: new Date().getTime(),
                title: `New ${submission.service} request from ${submission.name}`,
                message: `${submission.name} is looking for ${submission.service} services. Phone: ${submission.phone}`,
                date: new Date().toLocaleString(),
                read: false,
                submissionId: submission.timestamp
            };
            notifications.unshift(notification); // Add to beginning of array
            localStorage.setItem('formNotifications', JSON.stringify(notifications));
        }
        
        // Display submissions in the table
        function displaySubmissions() {
            const submissions = JSON.parse(localStorage.getItem('formSubmissions')) || [];
            const tableBody = document.getElementById('submissionsBody');
            const table = document.getElementById('submissionsTable');
            const noDataMessage = document.getElementById('noDataMessage');
            
            // Update stats
            document.getElementById('totalSubmissions').textContent = submissions.length;
            document.getElementById('cleaningRequests').textContent = submissions.filter(s => s.service === 'cleaning').length;
            document.getElementById('careRequests').textContent = submissions.filter(s => s.service === 'childcare' || s.service === 'eldercare').length;
            
            if (submissions.length === 0) {
                table.style.display = 'none';
                noDataMessage.style.display = 'block';
                return;
            }
            
            table.style.display = 'table';
            noDataMessage.style.display = 'none';
            
            // Clear previous data
            tableBody.innerHTML = '';
            
            // Add submissions to table
            submissions.forEach(sub => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${sub.name}</td>
                    <td>${sub.phone}</td>
                    <td>${sub.service}</td>
                    <td>${sub.location}</td>
                    <td>${sub.availability}</td>
                    <td>${sub.date}</td>
                    <td>
                        <button class="btn-sm btn-danger" onclick="deleteSubmission(${sub.timestamp})"><i class="fas fa-trash"></i> Delete</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        // Filter submissions based on search and filters
        function filterSubmissions() {
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            const serviceFilter = document.getElementById('serviceFilter').value;
            const availabilityFilter = document.getElementById('availabilityFilter').value;
            const genderFilter = document.getElementById('genderFilter').value;
            
            const submissions = JSON.parse(localStorage.getItem('formSubmissions')) || [];
            const tableBody = document.getElementById('submissionsBody');
            const noDataMessage = document.getElementById('noDataMessage');
            const table = document.getElementById('submissionsTable');
            
            // Clear previous data
            tableBody.innerHTML = '';
            
            // Filter submissions
            const filteredSubmissions = submissions.filter(sub => {
                const matchesSearch = searchText === '' || 
                    sub.name.toLowerCase().includes(searchText) ||
                    sub.phone.toLowerCase().includes(searchText) ||
                    sub.service.toLowerCase().includes(searchText);
                
                const matchesService = serviceFilter === '' || sub.service === serviceFilter;
                const matchesAvailability = availabilityFilter === '' || sub.availability === availabilityFilter;
                const matchesGender = genderFilter === '' || sub.gender === genderFilter;
                
                return matchesSearch && matchesService && matchesAvailability && matchesGender;
            });
            
            if (filteredSubmissions.length === 0) {
                table.style.display = 'none';
                noDataMessage.style.display = 'block';
                return;
            }
            
            table.style.display = 'table';
            noDataMessage.style.display = 'none';
            
            // Add filtered submissions to table
            filteredSubmissions.forEach(sub => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${sub.name}</td>
                    <td>${sub.phone}</td>
                    <td>${sub.service}</td>
                    <td>${sub.location}</td>
                    <td>${sub.availability}</td>
                    <td>${sub.date}</td>
                    <td>
                        <button class="btn-sm btn-danger" onclick="deleteSubmission(${sub.timestamp})"><i class="fas fa-trash"></i> Delete</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        // Clear search and filters
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('serviceFilter').value = '';
            document.getElementById('availabilityFilter').value = '';
            document.getElementById('genderFilter').value = '';
            displaySubmissions();
        }
        
        // Delete a submission
        function deleteSubmission(timestamp) {
            if (confirm('Are you sure you want to delete this submission?')) {
                let submissions = JSON.parse(localStorage.getItem('formSubmissions')) || [];
                submissions = submissions.filter(sub => sub.timestamp !== timestamp);
                localStorage.setItem('formSubmissions', JSON.stringify(submissions));
                displaySubmissions();
            }
        }
        
        // Clear all data
        function clearAllData() {
            if (confirm('Are you sure you want to delete ALL submissions? This cannot be undone.')) {
                localStorage.removeItem('formSubmissions');
                displaySubmissions();
            }
        }
        
        // Export to CSV
        function exportToCSV() {
            const submissions = JSON.parse(localStorage.getItem('formSubmissions')) || [];
            if (submissions.length === 0) {
                alert('No data to export');
                return;
            }
            
            // Create CSV content
            let csvContent = "Name,Phone,Email,Age,Gender,Service,Experience,Location,Availability,Information,Date\n";
            
            submissions.forEach(sub => {
                const row = [
                    `"${sub.name}"`,
                    `"${sub.phone}"`,
                    `"${sub.email}"`,
                    `"${sub.age}"`,
                    `"${sub.gender}"`,
                    `"${sub.service}"`,
                    `"${sub.experience}"`,
                    `"${sub.location}"`,
                    `"${sub.availability}"`,
                    `"${sub.feedback.replace(/"/g, '""')}"`,
                    `"${sub.date}"`
                ];
                csvContent += row.join(',') + '\n';
            });
            
            // Create download link
            const encodedUri = encodeURI('data:text/csv;charset=utf-8,' + csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'domestic_help_submissions.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // Display notifications
        function displayNotifications() {
            const notifications = JSON.parse(localStorage.getItem('formNotifications')) || [];
            const notificationInbox = document.getElementById('notificationInbox');
            
            if (notifications.length === 0) {
                notificationInbox.innerHTML = '<div class="no-data"><i class="fas fa-bell-slash"></i><h3>No notifications yet</h3><p>Notifications will appear here</p></div>';
                return;
            }
            
            // Clear previous notifications
            notificationInbox.innerHTML = '';
            
            // Add notifications to inbox
            notifications.forEach(notification => {
                const notificationElement = document.createElement('div');
                notificationElement.className = `notification-item ${notification.read ? 'read' : 'unread'}`;
                notificationElement.innerHTML = `
                    <div class="notification-content">
                        <h4>${notification.title}</h4>
                        <p>${notification.message}</p>
                        <small>${notification.date}</small>
                    </div>
                    <div class="notification-actions">
                        <button class="btn-sm" onclick="markAsRead(${notification.id})"><i class="fas fa-check"></i> Mark Read</button>
                        <button class="btn-sm btn-danger" onclick="deleteNotification(${notification.id})"><i class="fas fa-trash"></i> Delete</button>
                    </div>
                `;
                notificationInbox.appendChild(notificationElement);
            });
        }
        
        // Mark notification as read
        function markAsRead(id) {
            let notifications = JSON.parse(localStorage.getItem('formNotifications')) || [];
            notifications = notifications.map(notification => {
                if (notification.id === id) {
                    notification.read = true;
                }
                return notification;
            });
            localStorage.setItem('formNotifications', JSON.stringify(notifications));
            displayNotifications();
        }
        
        // Mark all notifications as read
        function markAllAsRead() {
            let notifications = JSON.parse(localStorage.getItem('formNotifications')) || [];
            notifications = notifications.map(notification => {
                notification.read = true;
                return notification;
            });
            localStorage.setItem('formNotifications', JSON.stringify(notifications));
            displayNotifications();
        }
        
        // Delete a notification
        function deleteNotification(id) {
            let notifications = JSON.parse(localStorage.getItem('formNotifications')) || [];
            notifications = notifications.filter(notification => notification.id !== id);
            localStorage.setItem('formNotifications', JSON.stringify(notifications));
            displayNotifications();
        }
        
        // Clear all notifications
        function clearAllNotifications() {
            if (confirm('Are you sure you want to delete ALL notifications?')) {
                localStorage.removeItem('formNotifications');
                displayNotifications();
            }
        }
        
        // Initialize the page
        window.onload = function() {
            loadSettings();
            showTab('form');
        };
    </script>
</body>
</html>